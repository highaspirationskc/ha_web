<div class="max-w-4xl mx-auto py-6 sm:px-6 lg:px-8">
  <div class="px-4 py-6 sm:px-0">
    <% if notice.present? %>
      <div class="rounded-md bg-green-50 p-4 mb-6">
        <p class="text-sm font-medium text-green-800" id="notice"><%= notice %></p>
      </div>
    <% end %>

    <% if alert.present? %>
      <div class="rounded-md bg-red-50 p-4 mb-6">
        <p class="text-sm font-medium text-red-800" id="alert"><%= alert %></p>
      </div>
    <% end %>

    <!-- Preview Banner -->
    <% unless @saturday_scoop.published_and_live? %>
      <div class="rounded-md bg-yellow-50 border border-yellow-200 p-4 mb-6">
        <div class="flex">
          <svg class="h-5 w-5 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
          <div class="ml-3">
            <h3 class="text-sm font-medium text-yellow-800">Preview Mode</h3>
            <p class="text-sm text-yellow-700 mt-1">
              <% if !@saturday_scoop.published? %>
                This scoop is a draft and not visible to the public.
              <% elsif @saturday_scoop.publish_on&.future? %>
                This scoop is scheduled to publish on <%= @saturday_scoop.publish_on.strftime("%B %d, %Y") %>.
              <% end %>
            </p>
          </div>
        </div>
      </div>
    <% end %>

    <!-- Header -->
    <div class="mb-6">
      <%= link_to saturday_scoops_path, class: "inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4" do %>
        <svg class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Back to Saturday Scoops
      <% end %>

      <div class="flex justify-between items-start">
        <div>
          <h1 class="text-3xl font-bold text-gray-900"><%= @saturday_scoop.title %></h1>
          <p class="mt-2 text-lg text-gray-600">By <%= @saturday_scoop.author %></p>
          <% if @saturday_scoop.publish_on.present? %>
            <p class="mt-1 text-sm text-gray-500"><%= @saturday_scoop.publish_on.strftime("%B %d, %Y") %></p>
          <% end %>
        </div>

        <div class="flex items-center gap-2">
          <% if @saturday_scoop.published? %>
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">Published</span>
          <% else %>
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800">Draft</span>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Featured Image -->
    <% if @saturday_scoop.image.present? %>
      <div class="mb-6">
        <%= image_tag @saturday_scoop.image.url, alt: @saturday_scoop.title, class: "w-full rounded-lg shadow-lg object-cover max-h-96" %>
      </div>
    <% end %>

    <!-- Video -->
    <% if @saturday_scoop.video.present? %>
      <div class="mb-6 aspect-video">
        <iframe
          src="<%= @saturday_scoop.video.embed_url %>"
          class="w-full h-full rounded-lg shadow-lg"
          allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;"
          allowfullscreen="true"
        ></iframe>
      </div>
    <% end %>

    <!-- Description -->
    <% if @saturday_scoop.description.present? %>
      <div class="prose max-w-none mb-8">
        <%= simple_format(@saturday_scoop.description) %>
      </div>
    <% end %>

    <!-- Admin Actions -->
    <div class="border-t border-gray-200 pt-6 mt-8">
      <div class="flex flex-wrap gap-3">
        <% if current_user.can?(:edit, :saturday_scoops) %>
          <%= link_to "Edit", edit_saturday_scoop_path(@saturday_scoop), class: "inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50" %>
        <% end %>

        <% if current_user.can?(:publish, :saturday_scoops) %>
          <% if @saturday_scoop.published? %>
            <%= button_to "Unpublish", unpublish_saturday_scoop_path(@saturday_scoop), method: :post, class: "inline-flex items-center px-4 py-2 border border-yellow-300 shadow-sm text-sm font-medium rounded-md text-yellow-700 bg-yellow-50 hover:bg-yellow-100" %>
          <% else %>
            <%= button_to "Publish", publish_saturday_scoop_path(@saturday_scoop), method: :post, class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700" %>
          <% end %>
        <% end %>

        <% if current_user.can?(:delete, :saturday_scoops) %>
          <%= button_to "Delete", saturday_scoop_path(@saturday_scoop), method: :delete, data: { turbo_confirm: "Are you sure you want to delete this Saturday Scoop?" }, class: "inline-flex items-center px-4 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50" %>
        <% end %>
      </div>
    </div>

    <!-- Metadata -->
    <div class="text-xs text-gray-400 mt-6">
      Created by <%= @saturday_scoop.created_by.email %> on <%= @saturday_scoop.created_at.strftime("%B %d, %Y at %I:%M %p") %>
      <% if @saturday_scoop.updated_at != @saturday_scoop.created_at %>
        <br>Last updated <%= @saturday_scoop.updated_at.strftime("%B %d, %Y at %I:%M %p") %>
      <% end %>
    </div>
  </div>
</div>
